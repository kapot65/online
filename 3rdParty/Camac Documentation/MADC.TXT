
                         M A D C.

     Назначение модуля МADC - модуль буферной памяти с фиксацией
     времени прихода события.

     Характеристики:
     Общий объем памяти - 1.5 Мб;
     Организация памяти - 512 Кб код 12-битного АЦП
                          1024 Кб код 28-битного таймера;
     Диапазон времени измерения- 5, 10, 15, 20, 50, 100, 200 сек;
     Точность измерения - 50, 100, 200, 400, 800 нсек;


   Входные сигналы (TTL, отрицательной полярности).

  1. START - сигнал начала измерения и включения таймера (индикатор-STR);
  2. ЕVENT - строб фиксации времени (по переднему фронту);
  3. CONVERT - сигнал BUSY от АЦП;
  4. INCLK - входной CLOCK (опция);
  5. STOP  - внешний стоп для таймера (индикатор-STP);
  6. DATA - данные от АЦП (см. описание);

   Выходные сигналы (TTL, отрицательной полярности)

   1. TIMER - выход таймера;
   2. OVFL  - переполнение адреса памяти (в данном модуле
              используется как INHIBIT для АЦП);
   3. ОUTCLK - 20 MHz;


                К О М А Н Д Ы  К А М А К

F11A0 - Разрешение старта измерения. Только после этой команды
        сигнал START по лицевой панели переведет модуль в режим
        измерения.
F12A0 - Разрешение доступа к памяти по магистрали КАМАК (индикатор -
        TBIP).
F8A0  - Тест LAM.
F26A0 - Разрешение LAM.
F24A0 - Запрет LAM.
F16A0 - Запись 16 - разрядного слова в память (область младших 16
        разрядов таймера). Запись возможна только в режиме TBIP.
        (т.е. после команды F12), в противном случае Q = 0.
F16A1 - Запись 12 разрядного слова в память (область старших 12
        разрядов таймера). Q как для F16A0.
F16A2 - Запись 16 разрядного слова в память (область данных кода АЦП).
        Q как для F16A0. После этой команды счетчик памяти
        увеличивается на 1, а после предыдущих команд - не изменяется.
F0A0  - Чтение 16 разрядного слова из памяти. После измерения в
        этой области хранятся младшие 16 разрядов таймера.
        Чтение производится только в режиме ТBIP, иначе Q=0.
F0A1  - Чтение 12 разрядного слова из памяти. После измерения в
        области хранятся 12 старших разряда таймера.
F0A2  - Чтение 16 разрядного слова из памяти. После измерения в
        этой области хранятся данные АЦП или "пустышка".
        Данные АЦП занимают 12 младших разрядов (0-11), а в 15-ом
        (старшем) находится признак "пустышки".
        Если 15-й разряд = 0, то это данные АЦП; если 1, то данное
        событие пришло в период BUSY АЦП.

F17A0 - Запись младших 16 разрядов адреса памяти (полный адрес - 18
        разрядов). Производится только в режиме TBIP.
F17A1 - Запись 2-х старших разрядов адреса памяти, а также кода времени
        измерения.

           бит 0  16-й разряд адреса памяти,
           бит 1  17-й разряд адреса памяти,
           бит 2  RT0, \
           бит 3  RT1,  > код времени измерения
           бит 4  RT2, /

╔═════╤═════╤═════╤════════════╤══════════════╗
║ RT2 │ RT1 │ RT0 │ ВРЕМЯ ИЗМ. │  ТОЧНОСТЬ    ║
╠═════╪═════╪═════╪════════════╪══════════════╣
║  0  │  0  │  0  │     запрещенный код       ║  <- постоянный "старт"
║  0  │  0  │  1  │    5 сек   │    50 нсек   ║
║  0  │  1  │  0  │   10 сек   │    50 нсек   ║
║  0  │  1  │  1  │   15 сек   │   100 нсек   ║
║  1  │  0  │  0  │   20 сек   │   100 нсек   ║
║  1  │  0  │  1  │   50 сек   │   200 нсек   ║
║  1  │  1  │  0  │  100 сек   │   400 нсек   ║
║  1  │  1  │  1  │  200 сек   │   800 нсек   ║
╚═════╧═════╧═════╧════════════╧══════════════╝

В модуле  при записи  адреса памяти  необходимо сначала  записывать
старшие разряды (F17A1), a  затем младшие. Установка адреса  памяти
используется для выборочного считывания данных, а также для  записи
в  тестовом  режиме.  При  старте  измерения по команде F11A0 адрес
памяти  автоматически  устанавливается  в  00000Н,  при  этом ранее
записанный код времени измерения сохраняется.

F1A0 - Чтение младших 16-ти разрядов адреса памяти.  Возможно как
       в TBIP, так и в режиме измерения.
F1A1 - Чтение 2-х старших разрядов адреса памяти и признака
       переполнения адреса.
         бит
          0      16-й разряд адреса памяти
          1      17-й разряд адреса памяти
          2      OVFL переполнение адреса( =1)
          3      TSTP конец измерения по таймеру или по OVFL=1.
                 (TSTP - источник LAM).

                   Формат данных.
 Данные  памяти  для  одного  события  считываются  тремя командами
КАМАК в режиме ТBIP (F0A0, F0A1, F0A2) с автоинкрементом адреса  по
F0A2 с нулевого  адреса или с  установленного по F17.  Максимальная
глубина памяти - 256  К событий. Количество событий,  записанных за
одно  измерение  определяется  по  адресу памяти, значение которого
можно определить по командам F1.

                      JUMPERS.

JP1,JP2 - устанавливают источник тактовых сигналов модуля.
          JP1 - внешний источник (Вход INCLK);
          JP2 - внутренний источник (OSC = 20MHz)
При использовании входа INCLK выход OUTCLK = INCLK.
          JP3 - отключение режима работы, в котором записываются
          события, пришедшие во время BUSY АЦП. Таким образом
	  можно увеличить количество регистрируемых оцифрованных
	  событий.
